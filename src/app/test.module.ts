import { MovieServiceApi } from "./services/movie-service-api.interface";
import { FilterMovie } from "./models/filter-movie";
import { BehaviorSubject, Observable } from "rxjs";
import { Data } from "./models/data";
import { MaxMinWinIntervalForProducers } from "./models/max-min-win-interval-for-producers";
import { Movie } from "./models/movie";
import { StudiosWithWinCount } from "./models/studios-with-win-count";
import { YearsWithMultipleWinners } from "./models/years-with-multiple-winners";
import { NgModule } from "@angular/core";
import { MovieService } from "./services/movie-service";
import { ReactiveFormsModule } from "@angular/forms";
import { HttpClientTestingModule } from "@angular/common/http/testing";

class MovieServiceMock implements MovieServiceApi {
  filterMovies$(filter: FilterMovie): Observable<Data> {
    return new BehaviorSubject(JSON.parse("{\"content\":[{\"id\":1,\"year\":1980,\"title\":\"Can't Stop the Music\",\"studios\":[\"Associated Film Distribution\"],\"producers\":[\"Allan Carr\"],\"winner\":true},{\"id\":11,\"year\":1981,\"title\":\"Mommie Dearest\",\"studios\":[\"Paramount Pictures\"],\"producers\":[\"Frank Yablans\"],\"winner\":true},{\"id\":16,\"year\":1982,\"title\":\"Inchon\",\"studios\":[\"MGM\"],\"producers\":[\"Mitsuharu Ishii\"],\"winner\":true},{\"id\":21,\"year\":1983,\"title\":\"The Lonely Lady\",\"studios\":[\"Universal Studios\"],\"producers\":[\"Robert R. Weston\"],\"winner\":true},{\"id\":26,\"year\":1984,\"title\":\"Bolero\",\"studios\":[\"Cannon Films\"],\"producers\":[\"Bo Derek\"],\"winner\":true},{\"id\":31,\"year\":1985,\"title\":\"Rambo: First Blood Part II\",\"studios\":[\"Columbia Pictures\"],\"producers\":[\"Buzz Feitshans\"],\"winner\":true},{\"id\":36,\"year\":1986,\"title\":\"Howard the Duck\",\"studios\":[\"Universal Studios\"],\"producers\":[\"Gloria Katz\"],\"winner\":true},{\"id\":37,\"year\":1986,\"title\":\"Under the Cherry Moon\",\"studios\":[\"Warner Bros.\"],\"producers\":[\"Bob Cavallo\",\"Joe Ruffalo\",\"Steve Fargnoli\"],\"winner\":true},{\"id\":41,\"year\":1987,\"title\":\"Leonard Part 6\",\"studios\":[\"Columbia Pictures\"],\"producers\":[\"Bill Cosby\"],\"winner\":true},{\"id\":46,\"year\":1988,\"title\":\"Cocktail\",\"studios\":[\"Touchstone Pictures\"],\"producers\":[\"Robert W. Cort\",\"Ted Field\"],\"winner\":true},{\"id\":51,\"year\":1989,\"title\":\"Star Trek V: The Final Frontier\",\"studios\":[\"Paramount Pictures\"],\"producers\":[\"Harve Bennett\"],\"winner\":true},{\"id\":56,\"year\":1990,\"title\":\"The Adventures of Ford Fairlane\",\"studios\":[\"20th Century Fox\"],\"producers\":[\"Joel Silver\",\"Steven Perry\"],\"winner\":true},{\"id\":57,\"year\":1990,\"title\":\"Ghosts Can't Do It\",\"studios\":[\"Triumph Releasing\"],\"producers\":[\"Bo Derek\"],\"winner\":true},{\"id\":61,\"year\":1991,\"title\":\"Hudson Hawk\",\"studios\":[\"TriStar Pictures\"],\"producers\":[\"Joel Silver\"],\"winner\":true},{\"id\":66,\"year\":1992,\"title\":\"Shining Through\",\"studios\":[\"20th Century Fox\"],\"producers\":[\"Carol Baum\",\"Howard Rosenman\"],\"winner\":true},{\"id\":71,\"year\":1993,\"title\":\"Indecent Proposal\",\"studios\":[\"Paramount Pictures\"],\"producers\":[\"Sherry Lansing\"],\"winner\":true},{\"id\":76,\"year\":1994,\"title\":\"Color of Night\",\"studios\":[\"Hollywood Pictures\"],\"producers\":[\"Buzz Feitshans\",\"David Matalon\"],\"winner\":true},{\"id\":81,\"year\":1995,\"title\":\"Showgirls\",\"studios\":[\"MGM\",\"United Artists\"],\"producers\":[\"Alan Marshall\",\"Charles Evans\"],\"winner\":true},{\"id\":86,\"year\":1996,\"title\":\"Striptease\",\"studios\":[\"Castle Rock Entertainment\",\"Columbia Pictures\"],\"producers\":[\"Andrew Bergman\",\"Mike Lobell\"],\"winner\":true},{\"id\":91,\"year\":1997,\"title\":\"The Postman\",\"studios\":[\"Warner Bros.\"],\"producers\":[\"Jim Wilson\",\"Kevin Costner\",\"Steve Tisch\"],\"winner\":true},{\"id\":96,\"year\":1998,\"title\":\"An Alan Smithee Film: Burn Hollywood Burn\",\"studios\":[\"Hollywood Pictures\"],\"producers\":[\"Ben Myron\",\"Joe Eszterhas\"],\"winner\":true},{\"id\":101,\"year\":1999,\"title\":\"Wild Wild West\",\"studios\":[\"Warner Bros.\"],\"producers\":[\"Barry Sonnenfeld\",\"Jon Peters\"],\"winner\":true},{\"id\":106,\"year\":2000,\"title\":\"Battlefield Earth\",\"studios\":[\"Franchise Pictures\",\"Warner Bros.\"],\"producers\":[\"Elie Samaha\",\"John Travolta\",\"Jonathan D. Krane\"],\"winner\":true},{\"id\":111,\"year\":2001,\"title\":\"Freddy Got Fingered\",\"studios\":[\"20th Century Fox\"],\"producers\":[\"Howard Lapides\",\"Larry Brezner\",\"Lauren Lloyd\"],\"winner\":true},{\"id\":116,\"year\":2002,\"title\":\"Swept Away\",\"studios\":[\"Screen Gems\"],\"producers\":[\"Matthew Vaughn\"],\"winner\":true},{\"id\":121,\"year\":2003,\"title\":\"Gigli\",\"studios\":[\"Columbia Pictures\",\"Revolution Studios\"],\"producers\":[\"Casey Silver\",\"Martin Brest\"],\"winner\":true},{\"id\":126,\"year\":2004,\"title\":\"Catwoman\",\"studios\":[\"Warner Bros.\"],\"producers\":[\"Denise Di Novi\",\"Edward McDonnell\"],\"winner\":true},{\"id\":131,\"year\":2005,\"title\":\"Dirty Love\",\"studios\":[\"First Look Pictures\"],\"producers\":[\"BJ Davis\",\"Jenny McCarthy\",\"John Mallory Asher\",\"Kimberley Kates\",\"Michael Manasseri\",\"Rod Hamilton\",\"Trent Walford\"],\"winner\":true},{\"id\":136,\"year\":2006,\"title\":\"Basic Instinct 2\",\"studios\":[\"C2 Pictures\",\"MGM\"],\"producers\":[\"Andrew G. Vajna\",\"Joel B. Michaels\",\"Mario Kassar\"],\"winner\":true},{\"id\":146,\"year\":2008,\"title\":\"The Love Guru\",\"studios\":[\"Paramount Pictures\"],\"producers\":[\"Gary Barber\",\"Michael DeLuca\",\"Mike Myers\"],\"winner\":true},{\"id\":151,\"year\":2009,\"title\":\"Transformers: Revenge of the Fallen\",\"studios\":[\"DreamWorks\",\"Hasbro\",\"Paramount Pictures\"],\"producers\":[\"Don Murphy\",\"Ian Bryce\",\"Lorenzo di Bonaventura\",\"Tom DeSanto\"],\"winner\":true},{\"id\":156,\"year\":2010,\"title\":\"The Last Airbender\",\"studios\":[\"Nickelodeon Movies\",\"Paramount Pictures\"],\"producers\":[\"Frank Marshall\",\"Kathleen Kennedy\",\"M. Night Shyamalan\",\"Sam Mercer\"],\"winner\":true},{\"id\":161,\"year\":2011,\"title\":\"Jack and Jill\",\"studios\":[\"Columbia Pictures\"],\"producers\":[\"Adam Sandler\",\"Jack Giarraputo\",\"Todd Garner\"],\"winner\":true},{\"id\":166,\"year\":2012,\"title\":\"The Twilight Saga: Breaking Dawn â€“ Part 2\",\"studios\":[\"Summit Entertainment\"],\"producers\":[\"Karen Rosenfelt\",\"Stephenie Meyer\",\"Wyck Godfrey\"],\"winner\":true},{\"id\":171,\"year\":2013,\"title\":\"Movie 43\",\"studios\":[\"Relativity Media\"],\"producers\":[\"Charles B. Wessler\",\"John Penotti\",\"Peter Farrelly\",\"Ryan Kavanaugh\"],\"winner\":true},{\"id\":176,\"year\":2014,\"title\":\"Saving Christmas\",\"studios\":[\"Samuel Goldwyn Films\"],\"producers\":[\"Amanda Rosser\",\"Darren Doane\",\"David Shannon\",\"Raphi Henley\"],\"winner\":true},{\"id\":181,\"year\":2015,\"title\":\"Fantastic Four\",\"studios\":[\"20th Century Fox\"],\"producers\":[\"Gregory Goodman\",\"Hutch Parker\",\"Matthew Vaughn\",\"Robert Kulzer\",\"Simon Kinberg\"],\"winner\":true},{\"id\":182,\"year\":2015,\"title\":\"Fifty Shades of Grey\",\"studios\":[\"Focus Features\",\"Universal Pictures\"],\"producers\":[\"Dana Brunetti\",\"E. L. James\",\"Michael De Luca\"],\"winner\":true},{\"id\":186,\"year\":2016,\"title\":\"Hillary's America: The Secret History of the Democratic Party\",\"studios\":[\"Quality Flix\"],\"producers\":[\"Gerald R. Molen\"],\"winner\":true},{\"id\":192,\"year\":2017,\"title\":\"The Emoji Movie\",\"studios\":[\"Columbia Pictures\"],\"producers\":[\"Michelle Raimo Kouyate\"],\"winner\":true},{\"id\":197,\"year\":2018,\"title\":\"Holmes & Watson\",\"studios\":[\"Columbia Pictures\"],\"producers\":[\"Adam McKay\",\"Clayton Townsend\",\"Jimmy Miller\",\"Will Ferrell\"],\"winner\":true},{\"id\":202,\"year\":2019,\"title\":\"Cats\",\"studios\":[\"Universal Pictures\"],\"producers\":[\"Debra Hayward\",\"Eric Fellner\",\"Tim Bevan\",\"and Tom Hooper\"],\"winner\":true}],\"pageable\":{\"sort\":{\"unsorted\":true,\"sorted\":false,\"empty\":true},\"offset\":0,\"pageSize\":99,\"pageNumber\":0,\"paged\":true,\"unpaged\":false},\"totalPages\":1,\"totalElements\":42,\"last\":true,\"size\":99,\"number\":0,\"sort\":{\"unsorted\":true,\"sorted\":false,\"empty\":true},\"first\":true,\"numberOfElements\":42,\"empty\":false}")).asObservable();
  }

  maxMinWinIntervalForProducers$(): Observable<MaxMinWinIntervalForProducers> {
    return new BehaviorSubject(JSON.parse("{\"min\":[{\"producer\":\"Joel Silver\",\"interval\":1,\"previousWin\":1990,\"followingWin\":1991}],\"max\":[{\"producer\":\"Matthew Vaughn\",\"interval\":13,\"previousWin\":2002,\"followingWin\":2015}]}")).asObservable();
  }

  movieWinnersByYear$(year: number): Observable<Movie[]> {
    return new BehaviorSubject(JSON.parse("[{\"id\":51,\"year\":1989,\"title\":\"Star Trek V: The Final Frontier\",\"studios\":[\"Paramount Pictures\"],\"producers\":[\"Harve Bennett\"],\"winner\":true}]")).asObservable();
  }

  top3StudiosWithWinCount$(): Observable<StudiosWithWinCount> {
    return new BehaviorSubject(JSON.parse("{\"studios\":[{\"name\":\"Columbia Pictures\",\"winCount\":7},{\"name\":\"Paramount Pictures\",\"winCount\":6},{\"name\":\"Warner Bros.\",\"winCount\":5},{\"name\":\"20th Century Fox\",\"winCount\":4},{\"name\":\"MGM\",\"winCount\":3},{\"name\":\"Universal Studios\",\"winCount\":2},{\"name\":\"Universal Pictures\",\"winCount\":2},{\"name\":\"Hollywood Pictures\",\"winCount\":2},{\"name\":\"Nickelodeon Movies\",\"winCount\":1},{\"name\":\"C2 Pictures\",\"winCount\":1},{\"name\":\"Summit Entertainment\",\"winCount\":1},{\"name\":\"Hasbro\",\"winCount\":1},{\"name\":\"Associated Film Distribution\",\"winCount\":1},{\"name\":\"Revolution Studios\",\"winCount\":1},{\"name\":\"First Look Pictures\",\"winCount\":1},{\"name\":\"Focus Features\",\"winCount\":1},{\"name\":\"Cannon Films\",\"winCount\":1},{\"name\":\"United Artists\",\"winCount\":1},{\"name\":\"Touchstone Pictures\",\"winCount\":1},{\"name\":\"Samuel Goldwyn Films\",\"winCount\":1},{\"name\":\"Quality Flix\",\"winCount\":1},{\"name\":\"TriStar Pictures\",\"winCount\":1},{\"name\":\"Franchise Pictures\",\"winCount\":1},{\"name\":\"Relativity Media\",\"winCount\":1},{\"name\":\"Castle Rock Entertainment\",\"winCount\":1},{\"name\":\"Screen Gems\",\"winCount\":1},{\"name\":\"Triumph Releasing\",\"winCount\":1},{\"name\":\"DreamWorks\",\"winCount\":1}]}")).asObservable();
  }

  yearsWithMultipleWinners$(): Observable<YearsWithMultipleWinners> {
    return new BehaviorSubject(JSON.parse("{\"years\":[{\"year\":1986,\"winnerCount\":2},{\"year\":1990,\"winnerCount\":2},{\"year\":2015,\"winnerCount\":2}]}")).asObservable();
  }

}

@NgModule({
  providers: [
    {provide: MovieService, useClass: MovieServiceMock}
  ],
  imports: [ReactiveFormsModule, HttpClientTestingModule],
  exports: [ReactiveFormsModule, HttpClientTestingModule],
})
export class TestModule {

}
